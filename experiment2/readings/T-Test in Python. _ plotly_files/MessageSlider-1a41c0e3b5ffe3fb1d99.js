(window.driftWebpackJsonp=window.driftWebpackJsonp||[]).push([[11],{1379:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(1375)),i=a(n(1376));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return e};t.default=(0,r.default)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(r){var a=void 0,o=void 0;return function(s){return e(s)?(a=a||(0,i.default)(t(r)))(s):(o=o||(0,i.default)(n(r)))(s)}}},"branch")},1382:function(e,t,n){"use strict";t.__esModule=!0;var r=n(13),i=function(e){return e&&e.__esModule?e:{default:e}}(n(1375));var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return null},t}(r.Component);a.displayName="Nothing";t.default=(0,i.default)(function(e){return a},"renderNothing",!1,!0)},1404:function(e,t,n){e.exports=n.p+"static/images/4a3c1161b81f906ccb7e41df6b548811.svg"},1427:function(e,t,n){e.exports={Badge:"_23adWK3Uprf4Ktba9B88ed"}},1428:function(e,t,n){"use strict";(function(e){var r=n(13),i=n(369),a=n.n(i),o=n(1427),s=n.n(o),c=n(1379),l=n.n(c),u=n(1382),p=n.n(u),d=function(t){var n=t.count,r=t.max,i=t.className;return e.createElement("div",{className:a()(s.a.Badge,i)},n>r?r+"+":n)};d.propTypes={count:r.PropTypes.number.isRequired,max:r.PropTypes.number,className:r.PropTypes.string},d.defaultProps={max:99};var f=l()(function(e){return e.count<1},p.a);t.a=f(d)}).call(this,n(13))},1434:function(e,t,n){"use strict";(function(e){var r=n(5),i=n.n(r),a=n(127),o=n.n(a),s=n(120),c=n.n(s),l=n(167),u=n.n(l),p=n(166),d=n.n(p),f=n(165),m=n.n(f),v=n(13),h=n(452),T=n(1496),y=n.n(T),g=n(369),b=n.n(g),C=n(1492),_=n.n(C),w=function(t){function n(e){c()(this,n);var t=d()(this,(n.__proto__||o()(n)).call(this,e));return t.handleWheel=function(e){var n=void 0;try{n=Object(h.findDOMNode)(t)}catch(e){return void console.error(e)}if(n)return e.deltaY<0&&0===n.scrollTop?(e.preventDefault(),!1):e.deltaY>0&&n.clientHeight+n.scrollTop+e.deltaY>=n.scrollHeight?(e.preventDefault(),!1):void 0},t.handleWheel=y()(t.handleWheel,100),t}return m()(n,t),u()(n,[{key:"render",value:function(){return e.createElement("div",i()({},this.props,{className:b()(_.a.ScrollableContent,this.props.className)}),this.props.children)}}]),n}(v.Component);w.propTypes={className:v.PropTypes.string,children:v.PropTypes.node},t.a=w}).call(this,n(13))},1435:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(5),i=n.n(r),a=n(213),o=n.n(a),s=n(13),c=n(369),l=n.n(c),u=n(1404),p=n.n(u),d=n(1498),f=n.n(d);function m(t){var n=t.className,r=o()(t,["className"]);return e.createElement("button",i()({},r,{className:l()(f.a.DismissButton,n),title:"Dismiss","aria-label":"Dismiss"}),e.createElement("img",{className:f.a.DismissButtonIcon,src:p.a,alt:"×"}))}m.propTypes={className:s.PropTypes.string,onClick:s.PropTypes.func.isRequired}}).call(this,n(13))},1436:function(e,t,n){"use strict";(function(e){var r=n(5),i=n.n(r),a=n(7),o=n.n(a),s=n(213),c=n.n(s),l=n(13),u=n(369),p=n.n(u),d=n(1500),f=n.n(d),m=e.createElement("span",{className:f.a.CalloutTail});function v(t){var n,r=t.className,a=t.children,s=t.hasTail,l=t.onClick,u=c()(t,["className","children","hasTail","onClick"]);return e.createElement("div",i()({},u,{onClick:l,className:p()(f.a.Callout,(n={},o()(n,f.a.hasTail,s),o()(n,f.a.hasClickHandler,l),n),r)}),s&&m,e.createElement("div",{className:f.a.Content},a))}v.propTypes={onClick:l.PropTypes.func,className:l.PropTypes.string,children:l.PropTypes.node,hasTail:l.PropTypes.bool},v.defaultProps={hasTail:!0},t.a=v}).call(this,n(13))},1455:function(e,t,n){"use strict";var r=n(192),i=n(1428),a=n(39);t.a=Object(r.connect)(function(e){return{count:Object(a.l)(e)}})(i.a)},1484:function(e,t,n){"use strict";var r=n(1436),i=n(1435),a=function(e){window&&(window.requestAnimationFrame&&window.requestAnimationFrame(e),window.setTimeout(e,0))},o=n(1434);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return i.a}),n.d(t,!1,function(){return a}),n.d(t,"c",function(){return o.a})},1489:function(e,t,n){e.exports={sliderTransitionEnter:"RleSeSSshUnxBU54Ju-Kg",sliderTransitionAppear:"yZ8m6oJqdYiWLMMseLe71",sliderTransitionLeave:"_2REwem2ttd38R0rWXhgPB3",sliderTransitionLeaveActive:"_2PYlwCQUwR96W4dGlZoidv",sliderTransitionEnterActive:"_1A1yWaMm_2RUCDFzylxa4q",sliderTransitionAppearActive:"_1HkBS3rdb0dAn10UW3DlfS"}},1490:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(5),i=n.n(r),a=n(13),o=n(1380),s=n.n(o),c=n(1489),l=n.n(c),u=function(t){return e.createElement(s.a,i()({},t,{transitionName:{enter:l.a.sliderTransitionEnter,enterActive:l.a.sliderTransitionEnterActive,appear:l.a.sliderTransitionAppear,appearActive:l.a.sliderTransitionAppearActive,leave:l.a.sliderTransitionLeave,leaveActive:l.a.sliderTransitionLeaveActive},transitionAppear:!0,transitionAppearTimeout:250,transitionEnterTimeout:250,transitionLeaveTimeout:200}))};u.propTypes={children:a.PropTypes.node}}).call(this,n(13))},1492:function(e,t,n){e.exports={ScrollableContent:"_3qJrcSln-TzTgp5jAZsvE-"}},1493:function(e,t,n){var r=n(453),i=n(370),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?a:+e}},1494:function(e,t,n){var r=n(371);e.exports=function(){return r.Date.now()}},1495:function(e,t,n){var r=n(453),i=n(1494),a=n(1493),o="Expected a function",s=Math.max,c=Math.min;e.exports=function(e,t,n){var l,u,p,d,f,m,v=0,h=!1,T=!1,y=!0;if("function"!=typeof e)throw new TypeError(o);function g(t){var n=l,r=u;return l=u=void 0,v=t,d=e.apply(r,n)}function b(e){var n=e-m;return void 0===m||n>=t||n<0||T&&e-v>=p}function C(){var e=i();if(b(e))return _(e);f=setTimeout(C,function(e){var n=t-(e-m);return T?c(n,p-(e-v)):n}(e))}function _(e){return f=void 0,y&&l?g(e):(l=u=void 0,d)}function w(){var e=i(),n=b(e);if(l=arguments,u=this,m=e,n){if(void 0===f)return function(e){return v=e,f=setTimeout(C,t),h?g(e):d}(m);if(T)return f=setTimeout(C,t),g(m)}return void 0===f&&(f=setTimeout(C,t)),d}return t=a(t)||0,r(n)&&(h=!!n.leading,p=(T="maxWait"in n)?s(a(n.maxWait)||0,t):p,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==f&&clearTimeout(f),v=0,l=m=u=f=void 0},w.flush=function(){return void 0===f?d:_(i())},w}},1496:function(e,t,n){var r=n(1495),i=n(453),a="Expected a function";e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:o,maxWait:t,trailing:s})}},1498:function(e,t,n){e.exports={DismissButton:"_1lVdwgQwG8iYSXC1rtIUn-",DismissButtonIcon:"_3sY_jwfgYHGUb3-n-s6cwm"}},1500:function(e,t,n){e.exports={CalloutTail:"_2IOZNDmRPpIkWq7_LHNMMH",Callout:"_2Am0IsT9lH_Ptdj-CW2uiy",hasClickHandler:"_1w6YXZ6Lh2aJD2goJRtLx3",hasTail:"_2hJjohH-EqiCHgHG2iPxnD",Content:"_2fl3RiMFMzxYgTM_TjTg8I"}},1502:function(e,t,n){e.exports={Wrapper:"AsmHNMwa8V6JFxwzpR6dG",SliderLayout:"_3GvcBFnnOqEvAbpxb4K9_",WidgetButton:"j8lkf_ta2sl2WMvjiqiaK",Content:"-zOcMNdFsi7uCebRFihg7",UnreadCountBadgeWrapper:"_2zlCNz6GWncyQ9b6a9KhmX"}},1503:function(e,t,n){"use strict";(function(e){var r=n(127),i=n.n(r),a=n(120),o=n.n(a),s=n(167),c=n.n(s),l=n(166),u=n.n(l),p=n(165),d=n.n(p),f=n(13),m=n(1396),v=n.n(m),h=n(1455),T=n(1392),y=n(1405),g=n(1502),b=n.n(g),C=function(t){function n(){var e,t,r,a;o()(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=r=u()(this,(e=n.__proto__||i()(n)).call.apply(e,[this].concat(c))),r.handleMeasure=function(e){var t=e.width,n=e.height;r.props.onResize&&r.props.onResize({width:t,height:n})},a=t,u()(r,a)}return d()(n,t),c()(n,[{key:"render",value:function(){return e.createElement(v.a,{onMeasure:this.handleMeasure,whitelist:["width","height"]},this.props.children)}}]),n}(f.Component);C.propTypes={onResize:f.PropTypes.func.isRequired,children:f.PropTypes.node.isRequired};var _=function(t){function n(){return o()(this,n),u()(this,(n.__proto__||i()(n)).apply(this,arguments))}return d()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.children,r=t.avatarUrl,i=t.bot,a=t.onWidgetClick,o=t.iconType,s=t.onResize;return e.createElement("div",{className:b.a.Wrapper},e.createElement(C,{onResize:s},e.createElement("div",{"aria-haspopup":"dialog","aria-label":"Open Drift Message",className:b.a.SliderLayout},e.createElement(T.a,{className:b.a.WidgetButton,onClick:a,iconType:o,avatarUrl:r,bot:i}),e.createElement("div",{className:b.a.UnreadCountBadgeWrapper},e.createElement(h.a,null)),e.createElement("div",{className:b.a.Content},n))))}}]),n}(f.Component);_.propTypes={children:f.PropTypes.node,avatarUrl:f.PropTypes.string,bot:f.PropTypes.bool,onWidgetClick:f.PropTypes.func,onResize:f.PropTypes.func,iconType:f.PropTypes.oneOf([y.a.ANNOUNCEMENT,y.a.NPS,y.a.CHAT])},t.a=_}).call(this,n(13))},1588:function(e,t,n){e.exports={Slider:"_2d_Bp-Kt5gkBPBdwssn49b",DismissButton:"_6eWTYUKsxoA_IdO5RL7zQ",Content:"_1QMEkp0zgBS93G6kHWmAHJ",FlexContentWrapper:"l82_D_KImuLA5zRjJBNjH",DismissButtonWrapper:"mTzHPSKdhS7SRFrqMCAlW"}},1589:function(e,t,n){"use strict";(function(e){var r=n(127),i=n.n(r),a=n(120),o=n.n(a),s=n(167),c=n.n(s),l=n(166),u=n.n(l),p=n(165),d=n.n(p),f=n(13),m=n(1484),v=n(1490),h=n(1588),T=n.n(h),y=function(t){function n(){return o()(this,n),u()(this,(n.__proto__||i()(n)).apply(this,arguments))}return d()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.onClick,r=t.onDismissClick,i=t.children;return e.createElement("div",{className:T.a.Slider,role:"dialog","aria-label":"Drift has sent a message"},e.createElement(v.a,null,e.createElement("div",{className:T.a.FlexContentWrapper,key:"slider"},e.createElement("div",{className:T.a.DismissButtonWrapper},e.createElement(m.b,{className:T.a.DismissButton,onClick:r})),e.createElement(m.a,{onClick:n},e.createElement("div",{className:T.a.Content},i)))))}}]),n}(f.Component);y.propTypes={children:f.PropTypes.node,onClick:f.PropTypes.func.isRequired,onDismissClick:f.PropTypes.func.isRequired},t.a=y}).call(this,n(13))},1590:function(e,t,n){"use strict";(function(e){var r=n(5),i=n.n(r),a=n(13),o=n(148),s=Object(o.h)({attachmentCount:{id:"app.message.attachmentCount",description:"Displays a messages's number of attachments",defaultMessage:"{count, plural,\n        =0 {No attachments}\n        one {1 attachment}\n        other {# attachments}\n      }"}}),c=function(t){return e.createElement(o.b,i()({},s.attachmentCount,{values:{count:t.count}}))};c.propTypes={count:a.PropTypes.number.isRequired},t.a=c}).call(this,n(13))},1820:function(e,t,n){"use strict";n.r(t),function(e){var r=n(7),i=n.n(r),a=n(127),o=n.n(a),s=n(120),c=n.n(s),l=n(167),u=n.n(l),p=n(166),d=n.n(p),f=n(165),m=n.n(f),v=n(13),h=n(42),T=n(192),y=n(12),g=n(1503),b=n(1590),C=n(1589),_=n(1405),w=n(69),E=n(45),P=n(4),k=n(10),N=n(39),A=n(24),R=n(92),x=n(214),W=n(128),O=function(t){var n=t.attachmentCount,r=t.messagePreview,i=t.maxLength;if("string"==typeof r){var a=r.length>i?r.trim().slice(0,i)+"…":r.trim();if(a)return e.createElement("span",null,a)}return n>0?e.createElement(b.a,{count:n}):e.createElement("span",null,e.createElement("em",null,"No preview"))};O.propTypes={messagePreview:v.PropTypes.string,attachmentCount:v.PropTypes.number,maxLength:v.PropTypes.number},O.defaultProps={attachmentCount:0,maxLength:100};var D=function(t){function n(){var e,t,r,i;c()(this,n);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=d()(this,(e=n.__proto__||o()(n)).call.apply(e,[this].concat(s))),r.handleClick=function(){var e=r.props,t=e.actions,n=e.view,i=e.botAvatarVersion,a=e.message;t.trackClick({ctaType:"content",view:n,botAvatarVersion:i}),t.markConversationAsRead(a.get("conversationId")),t.goToConversation(a.get("conversationId"))},r.handleDismissClick=function(){var e=r.props,t=e.actions,n=e.botAvatarVersion,i=e.view,a=e.driftUsersById,o=e.message,s=e.conversation;t.trackClick({ctaType:"dismiss",view:i,botAvatarVersion:n});var c=a[o.get("authorId")];t.sliderMessageDismissed({botMessage:c&&!!c.bot,userInteractedWithConversation:"BULK_SENT"===!s.get("status")}),t.markConversationAsRead(o.get("conversationId"))},r.handleResize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.height,n=e.width;r.props.actions.iframeOverrideSize({height:t?t+"px":void 0,width:n?n+"px":void 0})},i=t,d()(r,i)}return m()(n,t),u()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.actions,n=e.botAvatarVersion,r=e.view;t.trackImpression({view:r,botAvatarVersion:n})}},{key:"render",value:function(){var t=this.props,n=t.message,r=t.avatarUrl,i=t.bot,a=t.name,o=t.showNewCallout,s=n.get("attachments").size,c=n.getIn(["attributes","preview"]);return e.createElement(g.a,{avatarUrl:r,bot:i,iconType:_.a.CHAT,onResize:this.handleResize,onWidgetClick:this.handleClick},e.createElement(C.a,{onClick:this.handleClick,name:a,bot:i,onDismissClick:this.handleDismissClick,showNewCallout:o,showBranding:k.u},e.createElement(O,{attachmentCount:s,messagePreview:c})))}}]),n}(v.Component);D.propTypes={message:v.PropTypes.object.isRequired,avatarUrl:v.PropTypes.string,bot:v.PropTypes.bool,name:v.PropTypes.string.isRequired,conversation:v.PropTypes.object,driftUsersById:v.PropTypes.object,actions:v.PropTypes.shape({iframeOverrideSize:v.PropTypes.func.isRequired,goToConversation:v.PropTypes.func.isRequired,markConversationAsRead:v.PropTypes.func.isRequired,sliderMessageDismissed:v.PropTypes.func.isRequired})},t.default=Object(T.connect)(function(e){var t=Object(N.i)(e),n=e.DriftUser.driftUsersById[t.get("authorId")],r=t.get("conversationId"),a=n&&n.bot;return i()({message:t,showBranding:Object(k.u)(e),avatarUrl:n&&n.avatarUrl,bot:n&&n.bot,name:Object(y.a)(n,"name",""),conversation:Object(R.a)(e,{conversationId:r}),driftUsersById:Object(P.k)(e),view:a?W.e.MESSAGE_CALLOUT_BOT:W.e.MESSAGE_CALLOUT_USER,botAvatarVersion:a?Object(P.e)(e):void 0},"bot",a)},function(e){return{actions:Object(h.bindActionCreators)({iframeOverrideSize:w.iframeOverrideSize,goToConversation:E.f,markConversationAsRead:E.g,sliderMessageDismissed:A.D,trackImpression:x.c,trackClick:x.b},e)}})(D)}.call(this,n(13))}}]);